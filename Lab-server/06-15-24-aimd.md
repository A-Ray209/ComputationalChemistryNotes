### 1. 使用 aimd 进行 MD 计算

#### 1.1 准备软件
将基态 .log 文件转为 .pdb，使用 Material Studio 生成 25*25*25 的晶格存为 .xsd 文件
build - Crystals - Lattice Parameters / build - Bonds 

下载 vaspkit 软件包到 /jzq/software，[vaspkit 下载地址](https://sourceforge.net/projects/vaspkit/files/Binaries/vaspkit.1.5.1.linux.x64.tar.gz/download)
```
$ tar -zxvf vaspkit.1.5.1.linux.x64.tar.gz vaspkit.1.5.1/
$ cd vaspkit.1.5.1/
$ vim how_to_install
$ bash setup.sh
$ vim ~/.vaspkit
$ source ~/.bashrc
```

#### 1.2 计算操作
```
$ mkdir /aimd/8phdmb
$ mv 8phdmb.xsd /aimd/8phdmb
$ vaspkit                             # 是否正确安装 vaspkit
$ ls
$ gencp2k.sh -h                       # 查看帮助
$ gencp2k.sh -t 6 -K 400 8phdmb.xsd   # 生成计算指令文件
$ vim 8phdmb_MD/8phdmb_MD.inp         # 编辑计算指令文件
$ cp 8phdmb_MD/* ./
$ rm -rf 8phdmb_MD
$ ml load cp2k
$ cp2ks -h
$ cp2ks -n a -l node06 8phdmb_MD.inp  # 提交任务
```

#### 1.3 结果分析

计算生成 8phdmb_MD-pos-1.pdb 文件，用 power shell 加载 vmd 打开 8phdmb_MD-pos-1.pdb，可以看到已经计算了 4967 步数，使用 vlable 查看原子编号，后续使用 python 脚本进行批量分析

使用 md.py 处理 8phdmb_MD-pos-1.pdb 发现  u = mda.Universe(xyz_file) 函数返回错误 `IndexError: index 90 is out of bounds for axis 0 with size 90`

需要修改 .pdb 文件内容，使用 bash.sh 一键修改
```
#!/bin/bash
awk '
{
    if ($0 ~ /END/ && $0 !~ /ENDMDL/) {
        gsub(/END/, "ENDMDL", $0)
    }

    print $0
    if ($0 ~ /CRYST1/) {
        print "MODEL"
    }
}' $1  > MD.pdb
```
使用 python 脚本处理