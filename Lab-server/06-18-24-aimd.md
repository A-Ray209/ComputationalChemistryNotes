### 1. 安装 cp2k

参考网站 [CP2K第一性原理程序在CentOS中的简易安装方法](http://sobereva.com/586)

将空文件替换 ~/.bashrc 原 bashrc 暂存为 tmp_bashrc (清空安装环境)

去h ttps://github.com/cp2k/cp2k/releases/ 下载CP2K压缩包 cp2k-8.1.tar.bz2，运行 `tar -xf cp2k-8.1.tar.bz2` 命令解压之。下文假设解压后的目录是 /software/cp2k-8.1/ 
运行以下命令
```
cd /software/cp2k-8.1/tools/toolchain/
./install_cp2k_toolchain.sh --with-sirius=no --with-openmpi=install --with-plumed=install
```
接着上一节，现在把 `/software/cp2k-8.1/tools/toolchain/install/arch/` 下所有文件拷到 `/software/cp2k-8.1/arch` 目录下。这些文件定义了编译不同版本的CP2K所需的参数，其内容是 toolchain 脚本根据装的库和当前环境自动产生的。然后运行以下命令
```
source /software/cp2k-8.1/tools/toolchain/install/setup
cd /software/cp2k-8.1
make -j 4 ARCH=local VERSION="ssmp psmp"      #-j后面的数字是并行编译用的核数，机子有多少物理核心建议就设多少。
```

### 2. Gromacs 模拟主客体相互作用动力学

与 06-14-24-GromacsMD.md 内容相同

不同之处在于，要同时优化主客体，生成 .log .fchk 文件，再使用 ztop.py 生成 .gro .top .pdb 文件夹

packmol.inp 要将主客体装入盒子，生成 DMB_mix.pdb

合并拓扑文件命令为：`combinetop.py DMB.top mCBP.top` 生成 topol.top

然后顺序使用：min.mdp、compress.mdp、relax.mdp、prod.mdp 命令对体系进行动力学模拟
```
$ cat packmol.inp

tolerance 2.0
add_box_sides 1.2
output DMB_mix.pdb
structure DMB.pdb
  number 100
  inside cube 0. 0. 0. 150.
end structure
structure mCBP.pdb
  number 1000
  inside cube 0. 0. 0. 150.
end structure

$ cat topol.top

[ defaults ]
; nbfunc        comb-rule       gen-pairs       fudgeLJ fudgeQQ
1               2               yes             0.5          0.83333333  
[ atomtypes ]
; name    at.num    mass    charge ptype  sigma      epsilon
nh             7  14.010000  0.00000000  A      0.3189952        0.89956
n2             7  14.010000  0.00000000  A     0.33841679      0.3937144
ca             6  12.010000  0.00000000  A     0.33152123      0.4133792
ha             1   1.008000  0.00000000  A     0.26254785      0.0673624
c5             6  12.010000  0.00000000  A     0.33977095      0.4510352
cp             6  12.010000  0.00000000  A     0.33152123      0.4133792
cq             6  12.010000  0.00000000  A     0.33152123      0.4133792
c2             6  12.010000  0.00000000  A     0.33152123      0.4133792
na             7  14.010000  0.00000000  A     0.32058099      0.8543728

#include "DMB.itp"
#include "mCBP.itp"

[ system ]

[ molecules ]
;molecule name    nr.
DMB               100
MCB               1000

```


