### 1. 重组能计算

#### 1.1 重组能计算原理

态@构型

eg. s1@s0 垂直激发态； s1@s1 绝热激发态

1. s1到s0下的重组能 s1@s0-s1@s1 + (s0@s1-s0@s0)
2. s1到t1下的重组能 s1@t1-s1@s1  + (t1@s1-t1@t1) 
3. 阳离子和 中性电子重组能c@n-c@c + n@c-n@n

#### 1.2 计算脚本


```
cd ~/yhy/051624/tdopt                                         # 到计算绝热激发态文件夹下 s1@s1
``` 
vim reorg  编写循环脚本
```                                     
while [ $# -ge 1 ];do                                         # 设计循环
s0s0=$(awk '/Done/{print $5}' $1 | head -n 1)                 # 取第一步 s0@s0 能量；Done 为基态能量                       
s0s1=$(awk '/Done/{print $5}' $1 | tail -n 1)                 # 取最后一步 s0@s1 能量
s1s1=$(awk '/Total Energy/{print $5}' $1 | tail -n 1)         # 取第一步 s1@s0 能量；Total Energy 为激发态能量（总能量）
s1s0=$(awk '/Total Energy/{print $5}' $1 | head -n 1)         # 取最后一步 s1@s1 能量
reorg=`echo "($s0s1 - $s0s0 + $s1s0 - $s1s1) *27.2114" | bc`  # 计算公式
printf "%-20s %20.6f\n" ${1/.log/} $reorg                     # 格式打印输出
shift
done                                                          # 结束
```
mv reorg ~/software/ztools  自动成为环境变量

### 2. 生成 静电势图


```
MCubeGen.py -c den,esp *.fchk   # 生成 _den.cub 和 _esp.cub
```
用 Windows 中的 VMD 命令绘制图片

在cmd中打开VMD依次输入一下命令

```
vcube *_den.cub
vcube *_den.cub map *_esp.cub
vcsale BWG
Min Max mapped value is -0.03 0.05
```



```
vshowalways 5
```






































